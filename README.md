# BillingService
Сервис тарификации. Реализованные методы:

- PUT /activate/{number} - активация сим-карты. Возвращает объект Sim
- PUT /deactivate/{number} - блокировка сим-карты. Возвращает объект Sim
- GET /minutes/{number}  - получить данных о пакете минут. Возвращает объект SimPackage
- GET /megabytes/{number} - получение данных о пакете траффика (в мегабайтах). Возвращает объект SimPackage
- PUT /addminutes/{number} - добавление пакета минут. Принимает объект SimPackag, возвращает объект Sim
- PUT /addmegabytes/{number} - добавление пакета мегабайт. Принимает объект SimPackag, возвращает объект Sim
- PUT /writeoffminutes/{number} - списание минут. Принимает числовой парамет запроса value (размер списания), возвращает объект Sim
- PUT /writeoffmegabytes/{number} - списание мегабайт. Принимает числовой парамет запроса value (размер списания), возвращает объект Sim

Sim - представление данных о сим-карте, имеет следущую структуру:

    -  long number; // номер сим-карты;
    -  boolean status; // флаг, является ли сим-карта активной
    -  SimPackage minutes; // пакет минут
    -  SimPackage megabytes; // пакет мегабайт
    
SimPackage - пакет, привязанный к сим-карте. С каждым номером ассациированно два пакета : минуты и мегабайты. Имеет следущую структуру:

    -  int value; // номер сим-карты;
    -  Date  exp; // дата окончания действия пакета

Добавление нового пакета к номеру ведёт к полной замене предыдущего пакета.


Объекты Sim и SimPackage передаются в формате JSON.

Сервис реализован с помощью Spring Boot, в качестве базы данных используется H2 в embedded mode.
Коннструирование  и  инициализация таблиц прописаны в data.sql и schema.sql. Для работы достаточно запустить полученный в ходе сборки jar-файл. Сервис разворачивается на localhost:8080.

Содержимое тестовой базы после инициализации:

Номер         | Активность    | Кол-во минут  | Срок истечения пакета минут| Кол-во мегабайт | Срок истечения пакета мегабайт
------------- | ------------- | ---------------|----------------------------|-----------------|-------------------------------
89992739472   | TRUE          |10              |   2021-01-10              | 22320           |2020-01-10
89994567583   | TRUE          |20              |    2018-01-10                | 32340            |  null
89995678324   | TRUE          |10              |    2022-01-10                | 3245123            |  2021-01-10
89995645731   | TRUE          |243              |    2025-01-10                | 3113            |  2023-01-10
89992345362   | FALSE         |25              |    2021-01-10                 | 2115            |  2029-01-10
